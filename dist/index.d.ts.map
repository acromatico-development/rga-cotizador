{"mappings":"AAEA;IACE,cAAc,OAAO;IACrB,cAAc,OAAO;IACrB,iBAAiB,OAAO;IACxB,QAAQ,OAAO;IACf,OAAO,OAAO;IACd,SAAS,OAAO;IAChB,cAAc,MAAM;IACpB,kBAAkB,OAAO;IACzB,MAAM,OAAO;IACb,OAAO,OAAO;IACd,UAAU,OAAO;IACjB,QAAQ,OAAO;IACf,OAAO,OAAO;IACd,OAAO,OAAO;IACd,MAAM,OAAO;IACb,iBAAiB,OAAO;IACxB,OAAO,OAAO;IACd,OAAO,OAAO;IACd,SAAS,OAAO;IAChB,MAAM,OAAO;IACb,MAAM,OAAO;IACb,SAAS,OAAO;IAChB,WAAW,OAAO;IAClB,aAAa,OAAO;IACpB,OAAO,OAAO;IACd,MAAM,OAAO;IACb,OAAO,OAAO;IACd,UAAU,OAAO;IACjB,QAAQ,OAAO;IACf,0BAA0B,OAAO;IACjC,OAAO,OAAO;IACd,SAAS,OAAO;CACjB;AAED;IACE,cAAc,OAAO;IACrB,cAAc,OAAO;IACrB,iBAAiB,OAAO;IACxB,QAAQ,OAAO;IACf,OAAO,OAAO;IACd,SAAS,OAAO;IAChB,cAAc,MAAM;IACpB,kBAAkB,OAAO;IACzB,MAAM,OAAO;IACb,OAAO,OAAO;IACd,UAAU,OAAO;IACjB,QAAQ,OAAO;IACf,OAAO,OAAO;IACd,OAAO,OAAO;IACd,MAAM,OAAO;IACb,iBAAiB,OAAO;IACxB,OAAO,OAAO;IACd,OAAO,OAAO;IACd,SAAS,OAAO;IAChB,MAAM,OAAO;IACb,MAAM,OAAO;IACb,SAAS,OAAO;IAChB,WAAW,OAAO;IAClB,aAAa,OAAO;IACpB,OAAO,OAAO;IACd,MAAM,OAAO;IACb,OAAO,OAAO;IACd,UAAU,OAAO;IACjB,QAAQ,OAAO;IACf,0BAA0B,OAAO;IACjC,OAAO,OAAO;IACd,SAAS,OAAO;CACjB;AAED;IAEE,KAAK,UAAU;IACf,SAAS,eAAe;CACzB;AAED;IACE,gBAAgB,sBAAsB;IACtC,MAAM,WAAW;IACjB,eAAe,qBAAqB;IACpC,eAAe,0BAAqB;IACpC,oBAAoB,0BAA0B;IAC9C,oBAAoB,6BAA6B;IACjD,qBAAqB,4BAA4B;CAClD;AAED,aAAa;IACX,MAAM,EAAE,cAAc,CAAC;IACvB,UAAU,EAAE,UAAU,EAAE,CAAC;CAC1B,CAAC;AAEF;IAEE,KAAK,EAAE,MAAM,CAAC;IACd,cAAc,EAAE,gBAAgB,CAAC;IACjC,WAAW,EAAE,WAAW,CAAC;IACzB,cAAc,EAAE,KAAK,GAAG,SAAS,CAAC;IAiBlC,kBAAkB,EAAE,MAAM,CAAC;IAC3B,WAAW,EAAE,MAAM,CAAC;IACpB,UAAU,EAAE,MAAM,CAAC;IACnB,oBAAoB,EAAE,MAAM,CAAC;IAC7B,mBAAmB,EAAE,MAAM,CAAC;IAC5B,iBAAiB,EAAE,MAAM,CAAC;IAC1B,YAAY,EAAE,MAAM,CAAC;IAKrB,cAAc,EAAE,MAAM,CAAC;IACvB,oBAAoB,EAAE,MAAM,CAAC;gBAI3B,KAAK,EAAE,MAAM,EACb,cAAc,EAAE,gBAAgB,EAChC,WAAW,EAAE,WAAW,EACxB,cAAc,EAAE,cAAc;IAsGhC,cAAc;IAsCd,OAAO,IAAI,MAAM;IAsBjB,YAAY,CAAC,KAAK,EAAE,MAAM,GAAG,MAAM;IAQnC,qBAAqB,CAAC,MAAM,EAAE,gBAAgB,GAAG,MAAM;IAQvD,kBAAkB,CAAC,MAAM,EAAE,WAAW,GAAG,MAAM;IAQ/C,YAAY,CAAC,KAAK,EAAE,cAAc,GAAG,MAAM;CAS5C","sources":["src/src/index.ts","src/index.ts"],"sourcesContent":[null,"import axios from \"axios\";\n\nexport enum EstadoEnGarantia {\n  Aguascalientes = 1900,\n  BajaCalifornia = 3200,\n  BajaCaliforniaSur = 3200,\n  Campeche = 3200,\n  Chiapas = 3200,\n  Chihuahua = 3200,\n  CiudadDeMexico = 420,\n  CoahuilaDeZaragoza = 3200,\n  Colima = 3200,\n  Durango = 3200,\n  Guanajuato = 1800,\n  Guerrero = 2800,\n  Hidalgo = 1300,\n  Jalisco = 3200,\n  Mexico = 1100,\n  MichoacanDeOcampo = 1800,\n  Morelos = 1100,\n  Nayarit = 1000,\n  NuevoLeon = 3200,\n  Oaxaca = 2800,\n  Puebla = 1800,\n  Queretaro = 1300,\n  QuintanaRoo = 3200,\n  SanLuisPotosi = 2200,\n  Sinaloa = 3200,\n  Sonora = 3200,\n  Tabasco = 3200,\n  Tamaulipas = 3200,\n  Tlaxcala = 1300,\n  VeracruzDeIgnacioDeLaLlave = 3200,\n  Yucatan = 3200,\n  Zacatecas = 2800,\n}\n\nexport enum EstadoFirma {\n  Aguascalientes = 2000,\n  BajaCalifornia = 4000,\n  BajaCaliforniaSur = 2000,\n  Campeche = 2000,\n  Chiapas = 2000,\n  Chihuahua = 2000,\n  CiudadDeMexico = 300,\n  CoahuilaDeZaragoza = 2000,\n  Colima = 2000,\n  Durango = 2000,\n  Guanajuato = 2000,\n  Guerrero = 2000,\n  Hidalgo = 1300,\n  Jalisco = 2000,\n  Mexico = 2000,\n  MichoacanDeOcampo = 2000,\n  Morelos = 2000,\n  Nayarit = 2000,\n  NuevoLeon = 2000,\n  Oaxaca = 2000,\n  Puebla = 2000,\n  Queretaro = 2000,\n  QuintanaRoo = 2000,\n  SanLuisPotosi = 2000,\n  Sinaloa = 2000,\n  Sonora = 2000,\n  Tabasco = 2000,\n  Tamaulipas = 2000,\n  Tlaxcala = 2000,\n  VeracruzDeIgnacioDeLaLlave = 2000,\n  Yucatan = 2000,\n  Zacatecas = 2000,\n}\n\nexport enum NivelCobertura {\n  // alphaLight,\n  alpha = \"Alpha\",\n  alphaPlus = \"Alpha Plus\",\n}\n\nexport enum Coberturas {\n  investigacionRpp = \"Investigacion RPP\",\n  seguro = \"Seguro\",\n  firmaDeContrato = \"Firma de Contrat\",\n  investigacionRG = \"Investigación RG\",\n  gestionExtrajudicial = \"Gestion Extrajudicial\",\n  recuperacionInmueble = \"Recuperacion de Inmueble\",\n  recuperacionDeAdeudos = \"Recuperacion de Adeudos\",\n}\n\ntype Nivel = {\n  nombre: NivelCobertura;\n  coberturas: Coberturas[];\n};\n\nexport class Cotizador {\n  //Variables\n  renta: number;\n  estadoGarantia: EstadoEnGarantia;\n  estadoFirma: EstadoFirma;\n  nivelCobertura: Nivel | undefined;\n  private _perfilRiesgoIncumplimiento: number;\n  private _investigacionRg: number;\n  private _perfilRiesgoJuicioRecuperacion: number;\n  private _perfilRiesgoJuicioAdeudos: number;\n\n  //Constantes\n  private _factorInvestigacion: number;\n  private _factorSeguro: number;\n  private _factorFirma: number;\n  private _factorSolvencia: number;\n  private _factorIncumplimiento: number;\n  private _factorRecuperacion: number;\n  private _factorAdeudos: number;\n  private _niveles: Nivel[];\n\n  //Costos\n  costoInvestigacion: number;\n  costoSeguro: number;\n  costoFirma: number;\n  costoInvestigacionRg: number;\n  costoIncumplimiento: number;\n  costoRecuperacion: number;\n  costoAdeudos: number;\n\n  //Cotizacion\n  private _costoDeVentas: number;\n  private _utilidad: number;\n  precioDeVentas: number;\n  precioDeVentasMasIVA: number;\n  private _comisionInmobiliaria: number;\n\n  constructor(\n    renta: number,\n    estadoGarantia: EstadoEnGarantia,\n    estadoFirma: EstadoFirma,\n    nivelCobertura: NivelCobertura\n  ) {\n    this.renta = renta;\n    this.estadoGarantia = estadoGarantia;\n    this.estadoFirma = estadoFirma;\n\n    //TO DO: traer variables de fuente externa\n    this._investigacionRg = 21;\n    this._perfilRiesgoIncumplimiento = 0.2;\n    this._perfilRiesgoJuicioRecuperacion = 0.025;\n    this._perfilRiesgoJuicioAdeudos = 0.025;\n\n    //TO DO: traer constantes de fuente externa\n    this._factorInvestigacion = 1;\n    this._factorSeguro = 0.1308;\n    this._factorFirma = 1;\n    this._factorSolvencia = 1;\n    this._factorIncumplimiento = 180;\n    this._factorRecuperacion = 3718.88;\n    this._factorAdeudos = 14875.51;\n\n    //TO DO: traer niveles de fuente externa\n    this._niveles = [\n      {\n        nombre: NivelCobertura.alpha,\n        coberturas: [\n          Coberturas.investigacionRpp,\n          Coberturas.firmaDeContrato,\n          Coberturas.investigacionRG,\n          Coberturas.gestionExtrajudicial,\n          Coberturas.recuperacionInmueble,\n          Coberturas.recuperacionDeAdeudos,\n        ],\n      },\n      {\n        nombre: NivelCobertura.alphaPlus,\n        coberturas: [\n          Coberturas.investigacionRpp,\n          Coberturas.firmaDeContrato,\n          Coberturas.investigacionRG,\n          Coberturas.gestionExtrajudicial,\n          Coberturas.recuperacionInmueble,\n          Coberturas.recuperacionDeAdeudos,\n          Coberturas.seguro,\n        ],\n      },\n    ];\n\n    this.nivelCobertura = this._niveles.find(\n      (niv) => niv.nombre === nivelCobertura\n    )\n      ? this._niveles.find((niv) => niv.nombre === nivelCobertura)\n      : this._niveles[0];\n\n      axios(\"https://www.lycklig.com.mx/products/platos-rosa-con-dorado.json\")\n      .then((data) => console.log(data))\n      .catch((err) => console.log(err));\n\n    //setear a 0 costos\n    this.costoInvestigacion = 0;\n    this.costoSeguro = 0;\n    this.costoFirma = 0;\n    this.costoInvestigacionRg = 0;\n    this.costoIncumplimiento = 0;\n    this.costoRecuperacion = 0;\n    this.costoAdeudos = 0;\n\n    //setear a 0 cotización\n    this._costoDeVentas = 0;\n    this._utilidad = 0;\n    this.precioDeVentas = 0;\n    this.precioDeVentasMasIVA = 0;\n    this._comisionInmobiliaria = 0;\n\n    this.calcularCostos();\n    this.cotizar();\n  }\n\n  private calculoUtilidad(renta: number): number {\n    let resultado: number;\n\n    if (renta <= 350 / 0.05) {\n      resultado = 0.0428826023 * renta + 2412;\n    } else if (renta <= 8205.162) {\n      resultado = -0.0128826023 * renta + 2762;\n    } else if (renta <= 90000) {\n      resultado = 0.3295 * renta;\n    } else {\n      resultado = 0.23308 * renta + 8684;\n    }\n\n    if (renta <= 350 / 0.05) {\n      resultado += 350;\n    } else if (renta <= 2000 / 0.05) {\n      resultado += 0.05 * renta;\n    } else {\n      resultado += 2000;\n    }\n\n    return resultado - 821.86;\n  }\n\n  calcularCostos() {\n    this.costoInvestigacion = this.nivelCobertura?.coberturas.find(\n      (cober) => cober === Coberturas.investigacionRpp\n    )\n      ? this._factorInvestigacion * this.estadoGarantia\n      : 0;\n    this.costoSeguro = this.nivelCobertura?.coberturas.find(\n      (cober) => cober === Coberturas.seguro\n    )\n      ? this._factorSeguro * this.renta\n      : 0;\n    this.costoFirma = this.nivelCobertura?.coberturas.find(\n      (cober) => cober === Coberturas.firmaDeContrato\n    )\n      ? this._factorFirma * this.estadoFirma\n      : 0;\n    this.costoInvestigacionRg = this.nivelCobertura?.coberturas.find(\n      (cober) => cober === Coberturas.investigacionRG\n    )\n      ? this._factorSolvencia * this._investigacionRg\n      : 0;\n    this.costoIncumplimiento = this.nivelCobertura?.coberturas.find(\n      (cober) => cober === Coberturas.gestionExtrajudicial\n    )\n      ? this._factorIncumplimiento * this._perfilRiesgoIncumplimiento\n      : 0;\n    this.costoRecuperacion = this.nivelCobertura?.coberturas.find(\n      (cober) => cober === Coberturas.recuperacionInmueble\n    )\n      ? this._factorRecuperacion * this._perfilRiesgoJuicioRecuperacion\n      : 0;\n    this.costoAdeudos = this.nivelCobertura?.coberturas.find(\n      (cober) => cober === Coberturas.recuperacionDeAdeudos\n    )\n      ? this._factorAdeudos * this._perfilRiesgoJuicioAdeudos\n      : 0;\n  }\n\n  cotizar(): number {\n    this._costoDeVentas =\n      this.costoInvestigacion +\n      this.costoSeguro +\n      this.costoFirma +\n      this.costoInvestigacionRg +\n      this.costoIncumplimiento +\n      this.costoRecuperacion +\n      this.costoAdeudos;\n\n    this._utilidad = this.calculoUtilidad(this.renta);\n\n    this.precioDeVentas =\n      Math.floor((this._utilidad + this._costoDeVentas) * 100) / 100;\n    this.precioDeVentasMasIVA =\n      Math.floor(this.precioDeVentas * 1.16 * 100) / 100;\n    this._comisionInmobiliaria =\n      Math.floor(this.precioDeVentasMasIVA * 0.1 * 100) / 100;\n\n    return this.precioDeVentasMasIVA;\n  }\n\n  cambiarRenta(renta: number): number {\n    this.renta = renta;\n\n    this.calcularCostos();\n\n    return this.cotizar();\n  }\n\n  cambiarEstadoGarantia(estado: EstadoEnGarantia): number {\n    this.estadoGarantia = estado;\n\n    this.calcularCostos();\n\n    return this.cotizar();\n  }\n\n  cambiarEstadoFirma(estado: EstadoFirma): number {\n    this.estadoFirma = estado;\n\n    this.calcularCostos();\n\n    return this.cotizar();\n  }\n\n  cambiarNivel(nivel: NivelCobertura): number {\n    this.nivelCobertura = this._niveles.find((niv) => niv.nombre === nivel)\n      ? this._niveles.find((niv) => niv.nombre === nivel)\n      : this._niveles[0];\n\n    this.calcularCostos();\n\n    return this.cotizar();\n  }\n}\n"],"names":[],"version":3,"file":"index.d.ts.map"}